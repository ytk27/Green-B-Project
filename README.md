[![pulmuone_logo](https://github.com/user-attachments/assets/1fd18acd-b69f-451d-a6c4-1eaf4eec33c9)](https://ytk27.github.io/Green-B-Project/)

![HTML5](https://camo.githubusercontent.com/e06444f0f821325acecd72a9a02c76494ae2d285f8c5dd55ab9667c8fcef3540/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f48544d4c352d4533344632363f7374796c653d666c61742d737175617265266c6f676f3d68746d6c35266c6f676f436f6c6f723d7768697465) ![Javascript](https://camo.githubusercontent.com/7a0c885378047ca9a7331a2c8161403c10dd384cac88fdec568bf4777ac797a5/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4a6176615363726970742d4637444631453f7374796c653d666c61742d737175617265266c6f676f3d6a617661736372697074266c6f676f436f6c6f723d626c61636b) ![GitHub](https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white) ![Sass](https://camo.githubusercontent.com/18c8bec42317b6f104e69fc59c2d9262b40b24c65954995d50af3904232c36a1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f536173732d4343363639393f7374796c653d666c61742d737175617265266c6f676f3d53617373266c6f676f436f6c6f723d7768697465) ![Swiper](https://img.shields.io/badge/Swiper-6332F6?style=flat-square&logo=swiper&logoColor=white) 


## 🥬 소개
기존의 **풀무원** 사이트를 리다지인 및 재구성한 리뉴얼 프로젝트입니다.

![seoulw_sub (3)](https://github.com/user-attachments/assets/cb28df43-f385-4149-a4c6-b6b174f82dff)


## 🔗 URL
- 기존 <https://www.pulmuone.co.kr/pulmuone/main/Index.do>
- 리뉴얼 <https://ytk27.github.io/Green-B-Project/>



## 📑 요약
### 1. **주제**
   - '풀무원'사이트 리뉴얼

### 2. **목표**
   - 중복되는 컨텐츠 정리 및 전체비율 수정등 으로 사용자 만족도 향상 
     
### 3. **개발 환경**
   - HTML, SCSS
     
### 4. **기간 및 인원**
   - 2025.01.23 ~ 2025.02.26 (35일), 4인



## 🙌 담당 직무
| 이름   | GitHub                              | 직무              |해당 |
|:--------:|:---------------------------------------:|:-------------------:|:----:|
| **김도연** | [dododoodo](https://github.com/tolix-a) | 팀장 |     |
| 여태경 | [ytk27](https://github.com/pjiyeon90) | 개발 |     |
| 천지호 | [jiho](https://github.com/0011git) | 디자인 |    |
| 황수빈 | [subin75](https://github.com/Pon119) | 기획 |   ✔    |



## 💡 주요 기능
### 1. 이미지 변경 및 텍스트 변경
   - swiper을 활용하여 선택한 이미지와 그에 맞는 텍스트로 변경

### 2. 반응형 웹
   - 모바일 스몰(~480px), 태블릿(~1024px), PC(1024&#126;1700px) 해상도 지원



## 💼 폴더 구조
    📦Green-B-Project
     ┣ 📂css
     ┃ ┣ 📂scss
     ┃ ┃ ┣ 📜_res_sustainability.scss //반응형
     ┃ ┃ ┣ 📜_res-company.scss
     ┃ ┃ ┣ 📜_res-foods.scss
     ┣ 📂img
     ┃ ┣ 📂company
     ┃ ┗ 📂food
     ┃ ┗ 📂index
     ┃ ┗ 📂news
     ┃ ┗ 📂public
     ┃ ┗ 📂sustainability
     ┣ 📂js //애니메이션 효과
     ┃ ┣ 📜common.js
     ┃ ┣ 📜company.js
     ┃ ┣ 📜food.js
     ┃ ┣ 📜index.js
     ┃ ┣ 📜news.js
     ┃ ┣ 📜sustainability.js
     ┣ 📂srcs
     ┃ ┣ 📂fonts 
     ┃ ┣ 📂music
     ┃ ┣ 📂video
     ┣ 📜.env
     ┗ 📜README.md



## 🛠️ 개발 환경
| 기술            | 기술명                                                 | Badge                                                           |
|:-----------------:|:-----------------------------------------------------:|:-------------------------------------------------------------:|
| **스타일링**      | SASS                                                 | ![SASS](https://camo.githubusercontent.com/18c8bec42317b6f104e69fc59c2d9262b40b24c65954995d50af3904232c36a1/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f536173732d4343363639393f7374796c653d666c61742d737175617265266c6f676f3d53617373266c6f676f436f6c6f723d7768697465) |`
| **슬라이더**      | Swiper                                               | ![Swiper](https://img.shields.io/badge/Swiper-6332F6?style=flat-square&logo=swiper&logoColor=white) |`
| **배포**          | GitHub                                               | ![GitHub](https://img.shields.io/badge/GitHub-181717?style=flat-square&logo=GitHub&logoColor=white) |`



## 📚 참고 URL
- 기획서 : 
[Pulmuone Google Docs](<https://docs.google.com/presentation/d/1tlmfOmfyTzOd-6NjCS3rTwU-81MRL-_QRetkOH44cr4/edit#slide=id.p>)
- 화면 설계 : 
[Pulmuone Figma](<https://www.figma.com/design/yvRbuH4Q8I5dwRoWZ62oT1/(B%EC%A1%B0)%EC%8A%A4%ED%86%A0%EB%A6%AC%EB%B3%B4%EB%93%9C?node-id=2741-4201&p=f&t=GGYomiavl7cKnkD6-0>)
- ppt : 
[Pulmuone Canva](https://www.canva.com/design/DAGf-bGIHP0/ht3xe4QL4MPhP579NkMXyg/edit)


---
# 담당 개발 상세 : 

## 📑 요약

- **담당 직무**

   : 기획, 팀장
  
- **담당 페이지**

   : [메인](https://seoulw.vercel.app/),
  [에러페이지](https://seoulw.vercel.app/err),
  [이용약관](https://seoulw.vercel.app/policy)
  ${\color{#cccccc}(클릭\ 시\ 해당\ 페이지로\ 이동합니다.)}$

- **역할** 
  #### (1) 기획
    - Postman를 활용하여 api 응답 결과 분석, 컨텐츠별 API URL 작성 및 문서화
  
   #### (2) 초기 개발 환경 세팅
    - 프로젝트 생성, 폴더구조 설계, 패키지 및 라이브러리 설치, 페이지-컴포넌트 분리 및 파일 생성, 전역 스타일 설정 등
  
   #### (3) 공통 컴포넌트 제작
    - 헤더, 푸터, 장르 버튼, 컨텐츠 카드 등 공통으로 사용하는 컴포넌트 제작
  
   #### (4) PWA 적용
    - manifest.json 작성, [next-pwa](https://www.npmjs.com/package/@ducanh2912/next-pwa)패키지 사용
  
   #### (5) 이슈 발생 시 보조
    - 버그 수정 등
   


## ✏ 기획
- Postman으로 여러 경우의 수의 API 응답 데이터를 분석
- xml형식으로 들어온 데이터를 json으로 변환할 방법을 서치, 패키지를 설치해 사용하기로 함
- 이번주 공연, 공연 예정 등 컨텐츠별 데이터를 요청하는 로직 설계, API URL 작성 **(하단 추가 설명)**
- [API 작업자용 구글 스프레드시트](https://docs.google.com/spreadsheets/d/1hunhgwcZAyoGM4le85ZqblnQ8PAMn-0ZT9beVzkbr7c/edit?gid=584743467#gid=584743467) 작성
- 문서화 : [Seoul, W 기획서](https://docs.google.com/document/d/1Ieh-tqHfDDQsXYfCo3cP_YHhUgt8ATDOMHSVXXcL5fs/edit?tab=t.0)

<details>
  <summary>$\bf{{\color{#0969DA}정보\ 설계:\ 구조}}$</summary>
  
  ![seoulw_정보설계](https://github.com/user-attachments/assets/a2aac419-6649-4a1e-9212-3a64d2ccd293)
</details>


<details>
<summary>$\bf{\rm{\color{#0969DA}추가\ 설명:\ API\ URL}}$</summary>
	
  ### < API URL >
  #### 1. 공통
  - **공연시작일**(stdate), **공연종료일**(eddate), **페이지**(cpage), **페이지당 데이터 개수**(rows)는 필수 쿼리 값
  - 데이터 개수는 **20**으로 고정, 추가 데이터가 필요한 경우 **페이지** 값을 1씩 증가시켜 요청
  - **지역**(signgucode)은 **서울**로 고정
  - 각 페이지(메인, 카테고리, 검색, 디테일)에 맞게 기간을 변경하고 필요한 쿼리를 추가
  
  #### 2. 메인
  - 1단위 요청 시 컨텐츠별로 묶어 **(이번주 공연, 공연 예정, 장르별)** 총 3그룹으로 나누어 API를 3번 요청
  - 카테고리와 동일한 데이터를 사용하나, 카테고리 API 요청 함수를 사용하면 장르 8개×3그룹=총 24번의 요청이 필요해 **요청 횟수를 줄이기 위해 메인 전용 함수를 별도로 작성**함
  - 메인 페이지로 돌아갈 때마다 반복적 API요청을 피하기 위해 메인 페이지 최초 접속 시에만 데이터를 요청할 수 있도록 **메인 데이터는 최초 접속 이후 store에 저장하여 관리**
  - 1단위 요청에서 많은 데이터를 가져오므로 store에 데이터를 저장·관리 시 메인 페이지 로딩 대기 시간을 줄일 수 있는 추가적 이점이 있음
  
  #### 3. 카테고리
  - **장르**(shcate) 선택 시 API 요청
  - 장르 선택 후 하위 탭(**전체, 이번주, 공연중, 공연예정**) 선택 시, 각 항목에 맞는 쿼리를 추가해 API를 다시 요청
  - 장르 선택값에서 필터링을 할 경우, 결과를 안정적으로 **20개**씩 표시하기 어려운 경우가 있어, 그때마다 API를 새로 요청
  - 무한스크롤 방식으로 페이지 쿼리값을 **1씩 증가**시키며 API 요청. 결과가 없을 때까지 요청을 계속하며, 결과가 없으면 스크롤 종료
  
  - **기간 설정**:
    - **이번주**: 접속일 기준 **오늘**부터 **가장 가까운 일요일**까지
        - 예시: 접속일이 **2024.10.01**(화)이라면, **2024.10.01~2024.10.06**까지
    - **공연중**: 접속일 기준 **어제~오늘**까지
        - 공연 중인 행사에 대해서는 **공연중** 쿼리를 추가하여 **시작일**과 **종료일**에 관계없이 모두 출력. 이때, 응답 속도를 위해 범위를 좁혀 **어제~오늘**으로 설정
    - **공연 예정**: 접속일 기준 **내일~내일+1년**까지
        - 늦게 열릴 수 있는 콘서트 등을 고려해 최대 1년 후까지 공연 정보를 보여주도록 설정
    - **전체**: 접속일 기준 **어제~내일+1년**까지 설정. 이 범위는 **이번주**, **공연중**, **공연 예정** 범위를 모두 포함
  
  #### 4. 검색
  - 하나의 **검색 키워드**에 대해 **공연명**과 **공연장명** 두 가지 경우로 API 요청이 가능
  - 검색 이벤트 발생 시 두 가지를 동시에 요청하여, 결과가 없더라도 **각각 20개**씩 요청하여 최대 **40개**의 결과를 한 번에 표시 가능
  - 무한스크롤 방식으로 페이지 쿼리값을 **1씩 증가**시키며 결과가 없을 때까지 API를 요청하고, 결과가 없으면 스크롤 종료
  
  - **기간 설정**:
    - 접속일 기준 **KOPIS 서비스 시작일 2014.01.01**부터 **내일 +1년**까지
    - 시작일은 **KOPIS API Version 1.0** 배포일로 고정, 종료일은 카테고리에서 정한 범위 중 가장 늦은 **내일 +1년**까지 설정
  
  #### 5. 디테일
  - **공연 정보**와 **공연장 정보**를 모두 표시하기 위해 총 **2번의 API 요청**이 필요
  - 공연장 정보 요청을 위한 **공연장 ID** 값은 **공연 정보** 데이터에 포함되어 있으므로, 반드시 공연 정보 요청 후 공연장 정보를 요청
</details>



## 🔧 초기 개발 환경 세팅
### 1. 프로젝트 생성
- 페이지 라우팅 방식 선택

### 2. 폴더 구조 설계
- 아이콘, 이미지 등 정적 파일들을 src외부의 public폴더에 분리
- src폴더 내에 store폴더(상태 관리), utils폴더(api 함수, xml-json변환 함수), lib폴더(DB) 추가 생성

### 3. 패키지 및 라이브러리 설치
- axios, zustand, firebase, next-auth, swiper 등 사전 설치

### 4. 페이지-컴포넌트 분리 및 파일 생성
- 디자인을 기반으로 페이지와 컴포넌트화 할 요소들을 분리하고 이에 맞게 파일을 생성
- _app.js에 헤더, 푸터, 네비바 등 공통 컴포넌트를 추가해 기본 레이아웃을 설정
- 팀원 간 작업 영역이 겹치지 않도록 파일을 분리하고 각자의 작업 영역을 명확히 공유

### 5. 전역 스타일 설정 및 CSS 모듈화
- global.scss / reset.scss로 css 초기화, 폰트 설치, 색상 설정, 기본 레이아웃 설정 등 작업 전 필요한 전역 스타일 적용
- 4에서 생성한 파일을 기반으로 ```.module.scss``` 생성하고 각 파일에 import함



## 🧩 공통 컴포넌트 제작
: 기획 및 디자인 단계 이후 공통으로 사용할 컴포넌트를 구분해 제작

### 1.  로딩 
- [CSS Loaders](https://css-loaders.com/)에서 애니메이션 선택, ![FF4B77](https://github.com/user-attachments/assets/578b5d58-d2d8-4324-94f6-0be6ea7355fd)```#FFD4DF``` 테마색으로 변경

### 2. 헤더, 푸터, 네비게이션 바
- 라우팅에 따라 페이지별로 다르게 노출

### 3. 장르 버튼
- 메인, 카테고리 페이지에서 사용
  
### 4. 카드
- 메인, 카테고리, 검색 페이지에서 사용


![components_sjy](https://github.com/user-attachments/assets/2666c187-3aca-4a43-a3a2-c49d83f93930)



## ❗ 이슈 발생 시 보조
- xml 파싱 과정에서 값이 없는 태그와 값이 있는 태그가 서로 다른 형태로 변환되어 키값이 undefined되는 오류 발생

	⇒ **해결 방법**: Postman으로 여러 건의 응답을 받아 항상 값이 있는 태그와 아닌 태그를 확인, 아닌 태그에 조건식 작성



## 💥 트러블 슈팅
- 카테고리 페이지, 디테일 페이지에서 헤더와 네비바에 데이터를 넘겨줘야 하는 이슈

   : 헤더와 네비바는 최상위에 위치한 컴포넌트라 자식에서 부모로 props를 넘길 수 없는 이슈 발생

  ⇒ **해결 방법**: Zustand store에 데이터를 저장하여 전달


- 라우팅 시 같은 레벨에 있는 페이지에게 props를 넘겨줄 수 없는 이슈

  ⇒ **해결 방법**: 라우팅 시 쿼리로 데이터 전달



## 💭 프로젝트를 통해 배운점
모바일 환경에서의 헤더, 네비게이션 영역의 역할과 데이터 흐름 설계의 중요성을 배웠습니다.  

모바일은 정보를 표시할 영역이 좁기 때문에 웹과 달리 헤더와 네비게이션이 페이지마다 동일하지 않고 그 공간까지 컨텐츠에 활용하고 있었습니다.
그런데 **헤더와 네비게이션**이 **최상위 레이아웃**에 위치하다 보니, 컨텐츠 영역인 자식에서 부모로 데이터 전달이 불가능한 **props 이슈**가 발생했습니다.
처음 기획할 때는 이런 부분을 알지 못했고 전체적인 데이터 구조를 수정하기엔 너무 늦은 시점에 이 문제를 알게 되어, 헤더와 네비게이션에 데이터를 전달 하기 위해 세션에 저장하는 등의 여러 방안들을 시도해보다가 최종적으로 **store**를 사용하게 되었습니다.

향후 모바일 구조 설계를 하게 된다면 **최상위에서 데이터가 자연스럽게 전달**될 수 있도록 할 생각입니다.



---
## 📱 스크린샷
![seoulw_thumbnail (1)](https://github.com/user-attachments/assets/57ce1039-c49c-47e9-8073-0af1299515f4)
<!--
<details>
  <summary>$\bf{{\color{#0969DA}이미지}}$</summary>

![t](https://github.com/user-attachments/assets/dd46735e-4f07-4ab9-9eb6-7377388ddaa3)
</details>
-->
